<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanguard Defense Technologies - Startup Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #e5e7eb;
            height: 100vh;
            overflow: hidden;
        }
        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }
        .terminal-box {
            background: rgba(17, 24, 39, 0.95);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(139, 92, 246, 0.1);
            backdrop-filter: blur(10px);
        }
        .action-button {
            transition: all 0.2s ease;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 1px solid rgba(139, 92, 246, 0.5);
        }
        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }
        .action-button:active {
            transform: translateY(0);
        }
        .action-button.secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .action-button.partnership {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        .action-button.critical {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        .glowing-text {
            text-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
        }
        .progress-bar-container {
            background-color: rgba(31, 41, 55, 0.8);
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }
        .progress-bar {
            height: 100%;
            transition: width 0.5s ease;
            background: linear-gradient(90deg, #667eea, #764ba2);
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
        }
        .log-message {
            animation: slideIn 0.3s ease;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        #log-container::-webkit-scrollbar, #main-display::-webkit-scrollbar {
            width: 6px;
        }
        #log-container::-webkit-scrollbar-track, #main-display::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.2);
        }
        #log-container::-webkit-scrollbar-thumb, #main-display::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #667eea, #764ba2);
            border-radius: 3px;
        }
        .stat-card {
            background: rgba(31, 41, 55, 0.6);
            border-radius: 8px;
            padding: 0.75rem;
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: all 0.2s ease;
        }
        .stat-card:hover {
            border-color: rgba(139, 92, 246, 0.5);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.2);
        }
        .input-field {
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #e5e7eb;
            outline: none;
            transition: all 0.2s ease;
        }
        .input-field:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }
    </style>
</head>
<body class="p-4 md:p-6">

    <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-4 h-full">

        <!-- Left Column: Company Status & Metrics -->
        <div class="lg:col-span-1 flex flex-col gap-4 min-h-0">
            <div class="terminal-box p-5">
                <h2 class="text-2xl font-bold mb-4 glowing-text">üöÄ VANGUARD DEFENSE</h2>
                <div class="space-y-3">
                    <div class="stat-card">
                        <div class="text-xs text-gray-400 mb-1">Quarter</div>
                        <div class="text-lg font-bold">Q<span id="status-quarter">1</span> <span id="status-year">2025</span></div>
                    </div>
                    <div class="stat-card">
                        <div class="text-xs text-gray-400 mb-1">üí∞ Cash Reserves</div>
                        <div class="text-xl font-bold" id="status-cash">$0</div>
                    </div>
                    <div class="stat-card">
                        <div class="text-xs text-gray-400 mb-1">‚è≥ Runway</div>
                        <div class="text-lg font-bold" id="status-runway">0 mo</div>
                    </div>
                    <div class="stat-card">
                        <div class="text-xs text-gray-400 mb-1">üìà Valuation</div>
                        <div class="text-xl font-bold text-purple-400" id="status-valuation">$0</div>
                    </div>
                    <div class="stat-card">
                        <div class="text-xs text-gray-400 mb-1">üë• Team</div>
                        <div class="text-lg font-bold"><span id="status-team">0</span> people</div>
                    </div>
                </div>
            </div>

            <div class="terminal-box p-5 flex-shrink-0">
                <h3 class="text-lg font-bold mb-3 glowing-text">Key Metrics</h3>
                <div class="space-y-3">
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span>üòä Team Morale</span>
                            <span id="morale-value" class="font-mono">0%</span>
                        </div>
                        <div class="progress-bar-container h-2">
                            <div id="morale-bar" class="progress-bar" style="width: 0%;"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span>‚≠ê Reputation</span>
                            <span id="reputation-value" class="font-mono">0%</span>
                        </div>
                        <div class="progress-bar-container h-2">
                            <div id="reputation-bar" class="progress-bar" style="width: 0%;"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span>üèõÔ∏è DoD Relations</span>
                            <span id="dod-value" class="font-mono">0%</span>
                        </div>
                        <div class="progress-bar-container h-2">
                            <div id="dod-bar" class="progress-bar" style="width: 0%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="terminal-box p-5 flex-grow flex flex-col min-h-0">
                <h3 class="text-lg font-bold mb-3 glowing-text">üìã Activity Log</h3>
                <div id="log-container" class="flex-grow overflow-y-auto space-y-2"></div>
            </div>
        </div>

        <!-- Right Column: Main Display & Controls -->
        <div class="lg:col-span-2 terminal-box p-6 flex flex-col h-full">
            <h1 class="text-3xl font-bold mb-4 text-center glowing-text">Founder's Dashboard</h1>
            
            <div class="grid grid-cols-2 md:grid-cols-3 gap-2 mb-4">
                <button onclick="processCommand('hire')" class="action-button py-3 px-4 rounded-lg font-semibold text-sm">
                    Hire Team<br><span class="text-xs opacity-80">$500K</span>
                </button>
                <button onclick="processCommand('raise_funding')" class="action-button py-3 px-4 rounded-lg font-semibold text-sm">
                    Raise Funding
                </button>
                <button onclick="processCommand('develop ai')" class="action-button secondary py-3 px-4 rounded-lg font-semibold text-sm">
                    Develop AI
                </button>
                <button onclick="processCommand('develop drone')" class="action-button secondary py-3 px-4 rounded-lg font-semibold text-sm">
                    Develop Drones
                </button>
                <button onclick="processCommand('bid_contract')" class="action-button py-3 px-4 rounded-lg font-semibold text-sm">
                    Bid Contract
                </button>
                <button onclick="processCommand('partner')" class="action-button partnership py-3 px-4 rounded-lg font-semibold text-sm">
                    Partner w/ Prime
                </button>
                <button onclick="processCommand('marketing')" class="action-button py-3 px-4 rounded-lg font-semibold text-sm">
                    Marketing<br><span class="text-xs opacity-80">$200K</span>
                </button>
                <button onclick="processCommand('demo_day')" class="action-button py-3 px-4 rounded-lg font-semibold text-sm">
                    Demo Day<br><span class="text-xs opacity-80">$150K</span>
                </button>
                <button onclick="processCommand('optimize')" class="action-button secondary py-3 px-4 rounded-lg font-semibold text-sm">
                    Cut Costs
                </button>
            </div>

            <div id="main-display" class="flex-grow bg-black bg-opacity-30 rounded-lg p-6 overflow-y-auto mb-4">
                <div id="display-content" class="space-y-4"></div>
            </div>

            <div class="flex gap-3">
                <input type="text" id="command-input" class="input-field flex-grow px-4 py-3 rounded-lg" placeholder="Type command (e.g., 'report', 'help')...">
                <button onclick="handleCommand()" class="action-button critical px-8 py-3 rounded-lg font-bold">
                    Next Quarter ‚è≠Ô∏è
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sound effects
        const sounds = {
            click: function() {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.1);
            },
            success: function() {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                oscillator.frequency.value = 1200;
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.15, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);
            },
            error: function() {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                oscillator.frequency.value = 300;
                oscillator.type = 'sawtooth';
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.15);
            }
        };

        document.querySelectorAll('button').forEach(function(btn) {
            btn.addEventListener('click', function() { sounds.click(); });
        });

        const gameState = {
            quarter: 1,
            year: 2025,
            cash: 5000000,
            valuation: 20000000,
            employees: 15,
            morale: 75,
            reputation: 50,
            dodRelations: 40,
            burnRate: 450000,
            revenue: 100000,
            products: {
                aiSurveillance: { name: 'AI Surveillance', progress: 20, deployed: false, revenue: 50000 },
                autonomousDrone: { name: 'Autonomous Drones', progress: 0, deployed: false, revenue: 75000 },
                cyberDefense: { name: 'Cyber Defense Suite', progress: 0, deployed: false, revenue: 60000 }
            },
            contracts: [],
            partnerships: [],
            primes: [
                { name: 'Lockheed Martin', relation: 0, benefits: { revenue: 100000, reputation: 15, dodRelations: 20 } },
                { name: 'Raytheon', relation: 0, benefits: { revenue: 90000, reputation: 12, dodRelations: 18 } },
                { name: 'Northrop Grumman', relation: 0, benefits: { revenue: 95000, reputation: 13, dodRelations: 19 } },
                { name: 'Boeing Defense', relation: 0, benefits: { revenue: 85000, reputation: 11, dodRelations: 16 } }
            ],
            gameOver: false,
            fundingRound: 'Seed'
        };

        function addLog(message, type) {
            type = type || 'info';
            const logContainer = document.getElementById('log-container');
            const logEntry = document.createElement('div');
            logEntry.className = 'log-message text-sm p-2 rounded';
            
            var bgColor = 'bg-gray-800';
            var textColor = 'text-gray-300';
            if (type === 'success') { bgColor = 'bg-green-900'; textColor = 'text-green-300'; }
            else if (type === 'error') { bgColor = 'bg-red-900'; textColor = 'text-red-300'; }
            else if (type === 'warning') { bgColor = 'bg-yellow-900'; textColor = 'text-yellow-300'; }
            else if (type === 'player') { bgColor = 'bg-purple-900'; textColor = 'text-purple-300'; }
            
            logEntry.className += ' ' + bgColor + ' ' + textColor;
            logEntry.innerHTML = '<span class="font-mono text-xs opacity-70">Q' + gameState.quarter + ' ' + gameState.year + '</span> ' + message;
            logContainer.insertBefore(logEntry, logContainer.firstChild);
            
            while (logContainer.children.length > 30) {
                logContainer.removeChild(logContainer.lastChild);
            }
        }

        function updateDisplay() {
            document.getElementById('status-quarter').textContent = gameState.quarter;
            document.getElementById('status-year').textContent = gameState.year;
            document.getElementById('status-cash').textContent = '$' + (gameState.cash / 1000000).toFixed(2) + 'M';
            
            const runway = Math.max(0, Math.floor(gameState.cash / gameState.burnRate));
            const runwayEl = document.getElementById('status-runway');
            runwayEl.textContent = runway + ' mo';
            runwayEl.style.color = runway >= 12 ? '#4ade80' : runway >= 6 ? '#fbbf24' : '#f87171';
            
            document.getElementById('status-valuation').textContent = '$' + (gameState.valuation / 1000000).toFixed(1) + 'M';
            document.getElementById('status-team').textContent = gameState.employees;
            
            document.getElementById('morale-value').textContent = Math.round(gameState.morale) + '%';
            document.getElementById('morale-bar').style.width = gameState.morale + '%';
            
            document.getElementById('reputation-value').textContent = Math.round(gameState.reputation) + '%';
            document.getElementById('reputation-bar').style.width = gameState.reputation + '%';
            
            document.getElementById('dod-value').textContent = Math.round(gameState.dodRelations) + '%';
            document.getElementById('dod-bar').style.width = gameState.dodRelations + '%';
            
            updateMainDisplay();
        }

        function updateMainDisplay() {
            const content = document.getElementById('display-content');
            content.innerHTML = '<div class="space-y-4">';
            
            content.innerHTML += '<div class="stat-card"><h3 class="font-bold text-lg mb-2">üíµ Financial Overview</h3>';
            content.innerHTML += '<p class="text-sm">Monthly Revenue: <span class="font-bold text-green-400">$' + (gameState.revenue/1000).toFixed(0) + 'K</span></p>';
            content.innerHTML += '<p class="text-sm">Monthly Burn: <span class="font-bold text-red-400">$' + (gameState.burnRate/1000).toFixed(0) + 'K</span></p>';
            content.innerHTML += '<p class="text-sm">Net: <span class="font-bold">' + ((gameState.revenue - gameState.burnRate) >= 0 ? '+' : '') + '$' + ((gameState.revenue - gameState.burnRate)/1000).toFixed(0) + 'K/mo</span></p></div>';
            
            content.innerHTML += '<div class="stat-card"><h3 class="font-bold text-lg mb-2">üì¶ Products</h3>';
            Object.keys(gameState.products).forEach(function(key) {
                const p = gameState.products[key];
                content.innerHTML += '<div class="mb-2"><div class="flex justify-between text-sm mb-1">';
                content.innerHTML += '<span>' + p.name + '</span><span class="font-mono">' + p.progress + '%' + (p.deployed ? ' ‚úÖ' : '') + '</span></div>';
                content.innerHTML += '<div class="progress-bar-container h-2"><div class="progress-bar" style="width: ' + p.progress + '%"></div></div></div>';
            });
            content.innerHTML += '</div>';
            
            if (gameState.partnerships.length > 0) {
                content.innerHTML += '<div class="stat-card"><h3 class="font-bold text-lg mb-2">ü§ù Partnerships</h3>';
                gameState.partnerships.forEach(function(p) {
                    content.innerHTML += '<p class="text-sm">‚Ä¢ ' + p.name + ' <span class="text-green-400">(+$' + (p.benefits.revenue/1000).toFixed(0) + 'K/mo)</span></p>';
                });
                content.innerHTML += '</div>';
            }
            
            content.innerHTML += '<div class="stat-card"><h3 class="font-bold text-lg mb-2">üìã Status</h3>';
            content.innerHTML += '<p class="text-sm">Funding Stage: <span class="font-bold">' + gameState.fundingRound + '</span></p>';
            content.innerHTML += '<p class="text-sm">Active Contracts: <span class="font-bold">' + gameState.contracts.length + '</span></p>';
            content.innerHTML += '<p class="text-sm">Goal: <span class="font-bold text-purple-400">Reach $1B valuation</span></p></div>';
            
            content.innerHTML += '</div>';
        }

        function checkWin() {
            if (gameState.valuation >= 1000000000) {
                sounds.success();
                addLog('üéâ VICTORY! You have achieved unicorn status with a $' + (gameState.valuation/1000000000).toFixed(1) + 'B valuation!', 'success');
                gameState.gameOver = true;
                return true;
            }
            return false;
        }

        function checkLoss() {
            const runway = Math.floor(gameState.cash / gameState.burnRate);
            if (runway <= 0 && gameState.cash < 0) {
                sounds.error();
                addLog('üíÄ GAME OVER: Out of cash. Company shut down.', 'error');
                gameState.gameOver = true;
                return true;
            }
            if (gameState.morale <= 10 && gameState.quarter > 4) {
                sounds.error();
                addLog('üíÄ GAME OVER: Team quit due to low morale.', 'error');
                gameState.gameOver = true;
                return true;
            }
            return false;
        }

        function advanceQuarter() {
            if (gameState.gameOver) return;
            
            addLog('‚îÅ‚îÅ‚îÅ Quarter Complete ‚îÅ‚îÅ‚îÅ', 'info');
            
            gameState.cash += gameState.revenue - gameState.burnRate;
            addLog('Financial update: +$' + (gameState.revenue/1000).toFixed(0) + 'K revenue, -$' + (gameState.burnRate/1000).toFixed(0) + 'K burn', 'info');
            
            Object.keys(gameState.products).forEach(function(key) {
                const p = gameState.products[key];
                if (p.progress > 0 && p.progress < 100 && !p.deployed) {
                    p.progress = Math.min(100, p.progress + 8);
                    if (p.progress >= 100 && !p.deployed) {
                        p.deployed = true;
                        gameState.revenue += p.revenue;
                        gameState.reputation += 15;
                        gameState.valuation = Math.floor(gameState.valuation * 1.15);
                        sounds.success();
                        addLog('üöÄ ' + p.name + ' launched! +$' + (p.revenue/1000).toFixed(0) + 'K/mo revenue', 'success');
                    }
                }
            });
            
            gameState.morale = Math.max(0, gameState.morale - (Math.random() * 3));
            gameState.reputation = Math.max(0, gameState.reputation - (Math.random() * 2));
            
            if (gameState.quarter === 4) {
                gameState.quarter = 1;
                gameState.year++;
            } else {
                gameState.quarter++;
            }
            
            updateDisplay();
            if (!checkLoss()) checkWin();
        }

        function processCommand(cmd) {
            if (gameState.gameOver && cmd !== 'reset') {
                sounds.error();
                addLog('Game over. Type "reset" to start again.', 'error');
                return;
            }
            
            addLog('> ' + cmd, 'player');
            const parts = cmd.toLowerCase().trim().split(' ');
            const action = parts[0];
            const target = parts.slice(1).join(' ');
            
            switch(action) {
                case 'hire':
                    if (gameState.cash < 500000) {
                        sounds.error();
                        addLog('‚ùå Insufficient funds ($500K required)', 'error');
                        break;
                    }
                    gameState.cash -= 500000;
                    gameState.employees += 5;
                    gameState.burnRate += 50000;
                    gameState.morale = Math.min(100, gameState.morale + 8);
                    sounds.success();
                    addLog('‚úÖ Hired 5 engineers. Team: ' + gameState.employees, 'success');
                    break;
                    
                case 'raise_funding':
                case 'raise':
                    var funding, newRound;
                    if (gameState.fundingRound === 'Seed') {
                        funding = 10000000;
                        newRound = 'Series A';
                    } else if (gameState.fundingRound === 'Series A') {
                        funding = 25000000;
                        newRound = 'Series B';
                    } else {
                        funding = 50000000;
                        newRound = 'Series C';
                    }
                    gameState.cash += funding;
                    gameState.valuation = Math.floor(gameState.valuation * 1.8);
                    gameState.fundingRound = newRound;
                    sounds.success();
                    addLog('‚úÖ Raised $' + (funding/1000000) + 'M ' + gameState.fundingRound + '! Valuation: $' + (gameState.valuation/1000000).toFixed(1) + 'M', 'success');
                    break;
                    
                case 'develop':
                    if (target.includes('ai')) {
                        if (gameState.products.aiSurveillance.progress >= 100) {
                            addLog('‚ÑπÔ∏è AI Surveillance already complete', 'info');
                            break;
                        }
                        gameState.products.aiSurveillance.progress = Math.min(100, gameState.products.aiSurveillance.progress + 20);
                        sounds.success();
                        addLog('üî¨ AI Surveillance: ' + gameState.products.aiSurveillance.progress + '%', 'success');
                    } else if (target.includes('drone')) {
                        if (gameState.cash < 800000) {
                            sounds.error();
                            addLog('‚ùå Insufficient funds ($800K required)', 'error');
                            break;
                        }
                        gameState.cash -= 800000;
                        gameState.products.autonomousDrone.progress = Math.max(gameState.products.autonomousDrone.progress, 25);
                        sounds.success();
                        addLog('üî¨ Drone program initiated', 'success');
                    } else if (target.includes('cyber')) {
                        if (gameState.cash < 600000) {
                            sounds.error();
                            addLog('‚ùå Insufficient funds ($600K required)', 'error');
                            break;
                        }
                        gameState.cash -= 600000;
                        gameState.products.cyberDefense.progress = Math.max(gameState.products.cyberDefense.progress, 20);
                        sounds.success();
                        addLog('üî¨ Cyber Defense program started', 'success');
                    }
                    break;
                    
                case 'partner':
                case 'partnership':
                    var selectedPrime;
                    if (target) {
                        selectedPrime = gameState.primes.find(function(p) { return p.name.toLowerCase().includes(target); });
                    } else {
                        const available = gameState.primes.filter(function(p) {
                            return !gameState.partnerships.find(function(partner) { return partner.name === p.name; });
                        });
                        if (available.length > 0) {
                            selectedPrime = available[Math.floor(Math.random() * available.length)];
                        }
                    }
                    if (!selectedPrime) {
                        sounds.error();
                        addLog('‚ùå No prime available', 'error');
                        break;
                    }
                    if (gameState.partnerships.find(function(p) { return p.name === selectedPrime.name; })) {
                        addLog('‚ÑπÔ∏è Already partnered with ' + selectedPrime.name, 'info');
                        break;
                    }
                    if (gameState.cash < 300000) {
                        sounds.error();
                        addLog('‚ùå Insufficient funds ($300K required)', 'error');
                        break;
                    }
                    gameState.cash -= 300000;
                    const chance = 40 + (gameState.reputation * 0.4);
                    if (Math.random() * 100 < chance) {
                        gameState.partnerships.push(selectedPrime);
                        gameState.revenue += selectedPrime.benefits.revenue;
                        gameState.reputation = Math.min(100, gameState.reputation + selectedPrime.benefits.reputation);
                        gameState.dodRelations = Math.min(100, gameState.dodRelations + selectedPrime.benefits.dodRelations);
                        gameState.valuation = Math.floor(gameState.valuation * 1.25);
                        sounds.success();
                        addLog('ü§ù Partnership with ' + selectedPrime.name + ' secured!', 'success');
                    } else {
                        sounds.error();
                        addLog('‚ö†Ô∏è Partnership attempt failed (' + chance.toFixed(0) + '% chance)', 'warning');
                    }
                    break;
                    
                case 'bid_contract':
                case 'bid':
                    if (gameState.dodRelations < 50) {
                        sounds.error();
                        addLog('‚ùå DoD relations too low (need 50%)', 'error');
                        break;
                    }
                    const contractValue = Math.floor(Math.random() * 2000000) + 1500000;
                    gameState.contracts.push({ value: contractValue });
                    gameState.revenue += Math.floor(contractValue / 4);
                    gameState.reputation = Math.min(100, gameState.reputation + 15);
                    gameState.dodRelations = Math.min(100, gameState.dodRelations + 10);
                    gameState.valuation = Math.floor(gameState.valuation * 1.12);
                    sounds.success();
                    addLog('‚úÖ Won $' + (contractValue/1000000).toFixed(1) + 'M DoD contract!', 'success');
                    break;
                    
                case 'marketing':
                case 'market':
                    if (gameState.cash < 200000) {
                        sounds.error();
                        addLog('‚ùå Insufficient funds ($200K required)', 'error');
                        break;
                    }
                    gameState.cash -= 200000;
                    gameState.reputation = Math.min(100, gameState.reputation + 12);
                    gameState.dodRelations = Math.min(100, gameState.dodRelations + 6);
                    sounds.success();
                    addLog('‚úÖ Marketing campaign launched', 'success');
                    break;
                    
                case 'demo_day':
                case 'demo':
                    if (gameState.cash < 150000) {
                        sounds.error();
                        addLog('‚ùå Insufficient funds ($150K required)', 'error');
                        break;
                    }
                    gameState.cash -= 150000;
                    const demoChance = 30 + (gameState.reputation * 0.5);
                    if (Math.random() * 100 < demoChance) {
                        gameState.reputation = Math.min(100, gameState.reputation + 18);
                        gameState.dodRelations = Math.min(100, gameState.dodRelations + 15);
                        gameState.valuation = Math.floor(gameState.valuation * 1.15);
                        sounds.success();
                        addLog('‚úÖ Demo day success! Major reputation boost', 'success');
                    } else {
                        sounds.error();
                        addLog('‚ö†Ô∏è Demo day had mixed results', 'warning');
                    }
                    break;
                    
                case 'optimize':
                case 'cut':
                    gameState.burnRate = Math.max(300000, Math.floor(gameState.burnRate * 0.85));
                    gameState.morale = Math.max(0, gameState.morale - 10);
                    sounds.success();
                    addLog('‚úÖ Burn reduced 15%, morale dropped', 'warning');
                    break;
                    
                case 'report':
                case 'status':
                    addLog('‚îÅ‚îÅ‚îÅ COMPANY REPORT ‚îÅ‚îÅ‚îÅ', 'info');
                    addLog('Q' + gameState.quarter + ' ' + gameState.year + ' | Stage: ' + gameState.fundingRound, 'info');
                    addLog('Cash: $' + (gameState.cash/1000000).toFixed(2) + 'M | Valuation: $' + (gameState.valuation/1000000).toFixed(1) + 'M', 'info');
                    addLog('Team: ' + gameState.employees + ' | Morale: ' + Math.round(gameState.morale) + '%', 'info');
                    addLog('Contracts: ' + gameState.contracts.length + ' | Partnerships: ' + gameState.partnerships.length, 'info');
                    break;
                    
                case 'help':
                    addLog('‚îÅ‚îÅ‚îÅ COMMANDS ‚îÅ‚îÅ‚îÅ', 'info');
                    addLog('hire | raise_funding | develop [ai|drone|cyber]', 'info');
                    addLog('partner | bid_contract | marketing | demo_day', 'info');
                    addLog('optimize | report | reset', 'info');
                    break;
                    
                case 'reset':
                    location.reload();
                    break;
                    
                default:
                    if (cmd) {
                        sounds.error();
                        addLog('‚ùå Unknown command. Type "help"', 'error');
                    }
            }
            
            updateDisplay();
        }

        function handleCommand() {
            const input = document.getElementById('command-input');
            const cmd = input.value.trim();
            if (cmd.toLowerCase() === 'next_quarter' || cmd.toLowerCase() === 'next' || !cmd) {
                advanceQuarter();
            } else {
                processCommand(cmd);
            }
            input.value = '';
        }

        document.getElementById('command-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') handleCommand();
        });

        window.onload = function() {
            addLog('üöÄ Welcome to Vanguard Defense Technologies!', 'success');
            addLog('üéØ Goal: Build a $1B+ defense tech unicorn', 'info');
            addLog('üí° Start: $5M seed, 15 employees, 1 product in dev', 'info');
            addLog('‚ö° Type "help" for commands', 'info');
            updateDisplay();
        };
    </script>
</body>
</html>
