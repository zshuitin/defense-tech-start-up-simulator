<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanguard Defense: Startup Strategy Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            color: #e2e8f0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 1rem;
            box-sizing: border-box;
        }
        .game-container {
            background-color: #1e293b;
            border: 2px solid #334155;
            border-radius: 1rem;
            box-shadow: 0 0 40px rgba(59, 130, 246, 0.3);
            width: 100%;
            max-width: 1400px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            height: 95vh;
        }
        .header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            padding: 1.5rem;
            border-bottom: 2px solid #334155;
            text-align: center;
        }
        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #f0f9ff;
            margin: 0 0 0.5rem 0;
        }
        .header p {
            font-size: 0.9rem;
            color: #bfdbfe;
            margin: 0;
        }
        .main-content {
            display: flex;
            flex-grow: 1;
            padding: 1rem;
            gap: 1rem;
            overflow: hidden;
        }
        .left-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            overflow-y: auto;
        }
        .status-panel {
            background-color: #0f172a;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1.25rem;
        }
        .status-panel h3 {
            font-size: 1.3rem;
            font-weight: 700;
            color: #60a5fa;
            margin: 0 0 1rem 0;
            text-align: center;
            border-bottom: 2px solid #334155;
            padding-bottom: 0.5rem;
        }
        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.7rem;
            padding: 0.5rem;
            background-color: #1e293b;
            border-radius: 0.5rem;
            border-left: 3px solid #3b82f6;
        }
        .status-label {
            color: #94a3b8;
            font-size: 0.9rem;
        }
        .status-value {
            font-weight: 700;
            color: #e0f2fe;
            font-size: 0.95rem;
        }
        .products-panel {
            background-color: #0f172a;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1rem;
        }
        .products-panel h3 {
            font-size: 1.1rem;
            font-weight: 700;
            color: #60a5fa;
            margin: 0 0 0.75rem 0;
            text-align: center;
        }
        .product-item {
            margin-bottom: 0.75rem;
            padding: 0.6rem;
            background-color: #1e293b;
            border-radius: 0.5rem;
        }
        .product-name {
            font-size: 0.85rem;
            font-weight: 600;
            color: #bfdbfe;
            margin-bottom: 0.3rem;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #334155;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            transition: width 0.3s ease;
        }
        .partnerships-panel {
            background-color: #0f172a;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1rem;
        }
        .partnerships-panel h3 {
            font-size: 1.1rem;
            font-weight: 700;
            color: #60a5fa;
            margin: 0 0 0.75rem 0;
            text-align: center;
        }
        .partner-item {
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            background-color: #1e293b;
            border-radius: 0.4rem;
            border-left: 3px solid #8b5cf6;
            font-size: 0.85rem;
        }
        .news-ticker {
            background-color: #0f172a;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 0.75rem;
            height: 120px;
            overflow-y: auto;
        }
        .news-ticker h3 {
            font-size: 1rem;
            font-weight: 700;
            color: #60a5fa;
            margin: 0 0 0.5rem 0;
        }
        .news-item {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-bottom: 0.4rem;
            padding: 0.3rem;
            border-left: 2px solid #475569;
            padding-left: 0.5rem;
        }
        .center-panel {
            flex: 1.5;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .log-panel {
            flex: 1;
            background-color: #0f172a;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column-reverse;
        }
        .log-message {
            margin-bottom: 0.6rem;
            padding: 0.6rem;
            border-radius: 0.4rem;
            line-height: 1.5;
            font-size: 0.9rem;
        }
        .log-message.system { 
            color: #60a5fa; 
            background-color: rgba(59, 130, 246, 0.1);
            border-left: 3px solid #3b82f6;
        }
        .log-message.error { 
            color: #f87171; 
            background-color: rgba(248, 113, 113, 0.1);
            border-left: 3px solid #ef4444;
        }
        .log-message.player { 
            color: #84cc16; 
            background-color: rgba(132, 204, 22, 0.1);
            border-left: 3px solid #84cc16;
        }
        .log-message.success { 
            color: #4ade80; 
            background-color: rgba(74, 222, 128, 0.1);
            border-left: 3px solid #22c55e;
        }
        .log-message.warning { 
            color: #fbbf24; 
            background-color: rgba(251, 191, 36, 0.1);
            border-left: 3px solid #f59e0b;
        }
        .log-message.news { 
            color: #c084fc; 
            background-color: rgba(192, 132, 252, 0.1);
            border-left: 3px solid #a855f7;
        }
        .command-panel {
            background-color: #1e293b;
            padding: 1rem;
            border-top: 2px solid #334155;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .command-input {
            width: 100%;
            padding: 0.85rem;
            background-color: #0f172a;
            border: 2px solid #334155;
            border-radius: 0.5rem;
            color: #e2e8f0;
            font-size: 0.95rem;
            box-sizing: border-box;
            outline: none;
            transition: border-color 0.2s;
        }
        .command-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 0.6rem;
        }
        .action-button {
            padding: 0.75rem 0.5rem;
            background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
            border: none;
            border-radius: 0.5rem;
            color: white;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        .action-button:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(59, 130, 246, 0.4);
        }
        .action-button:active {
            transform: translateY(0);
        }
        .action-button.critical {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
        }
        .action-button.critical:hover {
            background: linear-gradient(135deg, #b91c1c 0%, #dc2626 100%);
        }
        .action-button.secondary {
            background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%);
        }
        .action-button.secondary:hover {
            background: linear-gradient(135deg, #6d28d9 0%, #7c3aed 100%);
        }
        .action-button.partnership {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
        }
        .action-button.partnership:hover {
            background: linear-gradient(135deg, #047857 0%, #059669 100%);
        }

        @media (max-width: 1024px) {
            .main-content {
                flex-direction: column;
            }
            .left-panel {
                flex: none;
            }
            .center-panel {
                min-height: 50vh;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üõ°Ô∏è Vanguard Defense Technologies</h1>
            <p>Build a defense tech unicorn. Navigate funding, R&D, contracts, and strategic partnerships to achieve $1B valuation.</p>
        </div>
        <div class="main-content">
            <div class="left-panel">
                <div class="status-panel">
                    <h3>Company Status (Q<span id="statusQuarter">1</span> <span id="statusYear">2025</span>)</h3>
                    <div class="status-item">
                        <span class="status-label">üí∞ Cash Reserves:</span>
                        <span id="statusCash" class="status-value">$0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">‚è≥ Runway:</span>
                        <span id="statusRunway" class="status-value">0 mo</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">üìà Valuation:</span>
                        <span id="statusValuation" class="status-value">$0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">üíµ Monthly Revenue:</span>
                        <span id="statusRevenue" class="status-value">$0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">üî• Monthly Burn:</span>
                        <span id="statusBurn" class="status-value">$0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">üë• Team Size:</span>
                        <span id="statusTeam" class="status-value">0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">üòä Team Morale:</span>
                        <span id="statusMorale" class="status-value">0%</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">‚≠ê Market Reputation:</span>
                        <span id="statusReputation" class="status-value">0%</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">üèõÔ∏è DoD Relations:</span>
                        <span id="statusDoD" class="status-value">0%</span>
                    </div>
                </div>

                <div class="products-panel">
                    <h3>üì¶ Product Development</h3>
                    <div id="productsContainer">
                    </div>
                </div>

                <div class="partnerships-panel">
                    <h3>ü§ù Prime Partnerships</h3>
                    <div id="partnershipsContainer">
                        <div style="color: #64748b; font-size: 0.85rem; text-align: center;">No partnerships yet</div>
                    </div>
                </div>
            </div>

            <div class="center-panel">
                <div class="news-ticker">
                    <h3>üì∞ Market News</h3>
                    <div id="newsContainer">
                    </div>
                </div>
                <div class="log-panel" id="logPanel">
                </div>
            </div>
        </div>
        <div class="command-panel">
            <input type="text" id="commandInput" class="command-input" placeholder="Type commands (e.g., 'hire', 'partner lockheed', 'report') or use buttons below">
            <div class="button-grid">
                <button class="action-button" onclick="processCommand('hire')">Hire Team ($500K)</button>
                <button class="action-button" onclick="processCommand('raise_funding')">Raise Series A</button>
                <button class="action-button secondary" onclick="processCommand('develop ai')">Dev AI System</button>
                <button class="action-button secondary" onclick="processCommand('develop drone')">Dev Drones</button>
                <button class="action-button" onclick="processCommand('bid_contract')">Bid DoD Contract</button>
                <button class="action-button partnership" onclick="processCommand('partner')">Seek Partnership</button>
                <button class="action-button" onclick="processCommand('marketing')">Marketing ($200K)</button>
                <button class="action-button" onclick="processCommand('demo_day')">Demo Day ($150K)</button>
                <button class="action-button secondary" onclick="processCommand('optimize')">Cut Costs</button>
                <button class="action-button" onclick="processCommand('report')">View Report</button>
                <button class="action-button critical" onclick="processCommand('next_quarter')">Advance Quarter</button>
            </div>
        </div>
    </div>

    <script>
        const gameState = {
            quarter: 1,
            year: 2025,
            cash: 5000000,
            valuation: 20000000,
            employees: 15,
            morale: 75,
            reputation: 50,
            dodRelations: 40,
            techLevel: 35,
            burnRate: 450000,
            revenue: 100000,
            products: {
                aiSurveillance: { name: 'AI Surveillance', progress: 20, deployed: false, revenue: 50000 },
                autonomousDrone: { name: 'Autonomous Drones', progress: 0, deployed: false, revenue: 75000 },
                cyberDefense: { name: 'Cyber Defense Suite', progress: 0, deployed: false, revenue: 60000 }
            },
            contracts: [],
            partnerships: [],
            primes: [
                { name: 'Lockheed Martin', relation: 0, benefits: { revenue: 100000, reputation: 15, dodRelations: 20 } },
                { name: 'Raytheon', relation: 0, benefits: { revenue: 90000, reputation: 12, dodRelations: 18 } },
                { name: 'Northrop Grumman', relation: 0, benefits: { revenue: 95000, reputation: 13, dodRelations: 19 } },
                { name: 'Boeing Defense', relation: 0, benefits: { revenue: 85000, reputation: 11, dodRelations: 16 } }
            ],
            news: [],
            gameOver: false,
            winCondition: { valuation: 1000000000, message: 'Unicorn Status!' },
            fundingRound: 'Seed'
        };

        const logPanel = document.getElementById('logPanel');
        const commandInput = document.getElementById('commandInput');
        const newsContainer = document.getElementById('newsContainer');

        function logMessage(message, type) {
            type = type || 'system';
            const msgElement = document.createElement('div');
            msgElement.classList.add('log-message', type);
            msgElement.textContent = '[Q' + gameState.quarter + ' ' + gameState.year + '] ' + message;
            logPanel.prepend(msgElement);
            while (logPanel.children.length > 50) {
                logPanel.removeChild(logPanel.lastChild);
            }
        }

        function addNews(message) {
            gameState.news.unshift(message);
            if (gameState.news.length > 5) gameState.news.pop();
            updateNewsDisplay();
            logMessage('üì∞ ' + message, 'news');
        }

        function updateNewsDisplay() {
            newsContainer.innerHTML = '';
            gameState.news.forEach(function(news) {
                const newsItem = document.createElement('div');
                newsItem.className = 'news-item';
                newsItem.textContent = news;
                newsContainer.appendChild(newsItem);
            });
        }

        function updateProductsDisplay() {
            const container = document.getElementById('productsContainer');
            container.innerHTML = '';
            
            Object.keys(gameState.products).forEach(function(key) {
                const product = gameState.products[key];
                const productDiv = document.createElement('div');
                productDiv.className = 'product-item';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'product-name';
                nameDiv.textContent = product.name + ': ' + product.progress + '% ' + (product.deployed ? '‚úÖ' : '');
                
                const progressBar = document.createElement('div');
                progressBar.className = 'progress-bar';
                
                const progressFill = document.createElement('div');
                progressFill.className = 'progress-fill';
                progressFill.style.width = product.progress + '%';
                
                progressBar.appendChild(progressFill);
                productDiv.appendChild(nameDiv);
                productDiv.appendChild(progressBar);
                container.appendChild(productDiv);
            });
        }

        function updatePartnershipsDisplay() {
            const container = document.getElementById('partnershipsContainer');
            const activePartnerships = gameState.partnerships;
            
            if (activePartnerships.length === 0) {
                container.innerHTML = '<div style="color: #64748b; font-size: 0.85rem; text-align: center;">No partnerships yet</div>';
                return;
            }
            
            container.innerHTML = '';
            activePartnerships.forEach(function(p) {
                const partnerDiv = document.createElement('div');
                partnerDiv.className = 'partner-item';
                partnerDiv.innerHTML = '<strong>' + p.name + '</strong><br><span style="color: #94a3b8; font-size: 0.75rem;">+$' + (p.benefits.revenue/1000).toFixed(0) + 'K/mo revenue</span>';
                container.appendChild(partnerDiv);
            });
        }

        function updateDisplay() {
            document.getElementById('statusQuarter').textContent = gameState.quarter;
            document.getElementById('statusYear').textContent = gameState.year;
            document.getElementById('statusCash').textContent = '$' + (gameState.cash / 1000000).toFixed(2) + 'M';
            
            const runway = Math.max(0, Math.floor(gameState.cash / gameState.burnRate));
            document.getElementById('statusRunway').textContent = runway + ' mo';
            document.getElementById('statusRunway').style.color = runway >= 12 ? '#4ade80' : runway >= 6 ? '#fbbf24' : '#f87171';
            
            document.getElementById('statusValuation').textContent = '$' + (gameState.valuation / 1000000).toFixed(1) + 'M';
            document.getElementById('statusRevenue').textContent = '$' + (gameState.revenue / 1000).toFixed(0) + 'K';
            document.getElementById('statusBurn').textContent = '$' + (gameState.burnRate / 1000).toFixed(0) + 'K';
            document.getElementById('statusTeam').textContent = gameState.employees;
            document.getElementById('statusMorale').textContent = Math.round(gameState.morale) + '%';
            document.getElementById('statusReputation').textContent = Math.round(gameState.reputation) + '%';
            document.getElementById('statusDoD').textContent = Math.round(gameState.dodRelations) + '%';
            
            updateProductsDisplay();
            updatePartnershipsDisplay();
        }

        function checkWinCondition() {
            if (gameState.valuation >= gameState.winCondition.valuation) {
                logMessage('üéâ VICTORY! ' + gameState.winCondition.message + ' You have built a defense tech unicorn!', 'success');
                addNews('BREAKING: Vanguard Defense reaches $' + (gameState.valuation/1000000000).toFixed(1) + 'B valuation!');
                gameState.gameOver = true;
                logMessage('Type "reset" to play again.', 'system');
                return true;
            }
            return false;
        }

        function checkLossConditions() {
            const runway = Math.floor(gameState.cash / gameState.burnRate);
            if (runway <= 0 && gameState.cash < 0) {
                logMessage('üíÄ GAME OVER: You ran out of cash. The company has shut down.', 'error');
                addNews('Vanguard Defense closes doors amid cash crisis');
                gameState.gameOver = true;
                logMessage('Type "reset" to try again.', 'system');
                return true;
            }
            if (gameState.morale <= 10 && gameState.quarter > 4) {
                logMessage('üíÄ GAME OVER: Your entire team quit due to low morale.', 'error');
                addNews('Mass exodus at Vanguard Defense as morale collapses');
                gameState.gameOver = true;
                logMessage('Type "reset" to try again.', 'system');
                return true;
            }
            return false;
        }

        function randomEvent() {
            const events = [
                { 
                    chance: 0.12, 
                    effect: function() {
                        gameState.reputation = Math.max(0, gameState.reputation - 8);
                        addNews('Competitor Anduril announces major AI breakthrough');
                    }
                },
                { 
                    chance: 0.10, 
                    effect: function() {
                        gameState.dodRelations += 12;
                        addNews('DoD releases new RFP for autonomous systems');
                        logMessage('‚ú® New DoD opportunity! Your relations improved.', 'success');
                    }
                },
                { 
                    chance: 0.08, 
                    effect: function() {
                        gameState.morale = Math.max(0, gameState.morale - 12);
                        addNews('Tech talent war intensifies in defense sector');
                        logMessage('‚ö†Ô∏è Key engineer received competing offer. Morale impacted.', 'warning');
                    }
                },
                {
                    chance: 0.07,
                    effect: function() {
                        const bonus = Math.floor(Math.random() * 500000) + 500000;
                        gameState.cash += bonus;
                        addNews('SBIR grants announced for defense tech startups');
                        logMessage('‚ú® Government grant awarded: $' + (bonus/1000).toFixed(0) + 'K!', 'success');
                    }
                },
                {
                    chance: 0.06,
                    effect: function() {
                        gameState.reputation += 10;
                        addNews('Defense tech startups gain attention at AUSA conference');
                        logMessage('‚ú® Positive media coverage boosted reputation!', 'success');
                    }
                },
                {
                    chance: 0.05,
                    effect: function() {
                        gameState.dodRelations = Math.max(0, gameState.dodRelations - 10);
                        addNews('Pentagon tightens security clearance requirements');
                        logMessage('‚ö†Ô∏è New regulations slowed DoD engagement.', 'warning');
                    }
                }
            ];

            events.forEach(function(event) {
                if (Math.random() < event.chance) {
                    event.effect();
                }
            });
        }

        function advanceQuarter() {
            logMessage('‚îÅ‚îÅ‚îÅ End of Q' + gameState.quarter + ' ' + gameState.year + ' ‚îÅ‚îÅ‚îÅ', 'system');
            
            const netCash = gameState.cash + gameState.revenue - gameState.burnRate;
            gameState.cash = netCash;
            
            logMessage('üìä Financial: Revenue +$' + (gameState.revenue/1000).toFixed(0) + 'K, Burn -$' + (gameState.burnRate/1000).toFixed(0) + 'K', 'system');

            Object.keys(gameState.products).forEach(function(key) {
                const product = gameState.products[key];
                if (product.progress > 0 && product.progress < 100 && !product.deployed) {
                    product.progress = Math.min(100, product.progress + 8);
                    if (product.progress >= 100 && !product.deployed) {
                        product.deployed = true;
                        gameState.revenue += product.revenue;
                        gameState.reputation += 15;
                        gameState.valuation = Math.floor(gameState.valuation * 1.15);
                        addNews('Vanguard Defense launches ' + product.name);
                        logMessage('üöÄ ' + product.name + ' completed and deployed! Revenue +$' + (product.revenue/1000).toFixed(0) + 'K/mo.', 'success');
                    }
                }
            });

            gameState.morale = Math.max(0, gameState.morale - (Math.random() * 3));
            gameState.reputation = Math.max(0, gameState.reputation - (Math.random() * 2));

            gameState.partnerships.forEach(function(p) {
                const prime = gameState.primes.find(function(pr) { return pr.name === p.name; });
                if (prime) {
                    prime.relation = Math.max(0, prime.relation - 2);
                }
            });

            randomEvent();

            if (gameState.quarter === 4) {
                const growthRate = gameState.valuation / 20000000;
                if (growthRate > 2) {
                    addNews('Investors bullish on Vanguard Defense growth trajectory');
                    gameState.reputation += 5;
                } else if (growthRate < 1.2) {
                    addNews('Investors question Vanguard Defense progress');
                    gameState.reputation = Math.max(0, gameState.reputation - 5);
                }
            }

            if (gameState.quarter === 4) {
                gameState.quarter = 1;
                gameState.year++;
            } else {
                gameState.quarter++;
            }

            logMessage('‚îÅ‚îÅ‚îÅ Start of Q' + gameState.quarter + ' ' + gameState.year + ' ‚îÅ‚îÅ‚îÅ', 'system');
            
            updateDisplay();
            if (!checkLossConditions()) {
                checkWinCondition();
            }
        }

        function processCommand(command) {
            command = command.toLowerCase().trim();
            if (command) {
                logMessage('> ' + command, 'player');
            }

            if (gameState.gameOver && command !== 'reset') {
                logMessage('Game is over. Type "reset" to start a new game.', 'error');
                return;
            }

            const parts = command.split(' ');
            const action = parts[0];
            const target = parts.slice(1).join(' ');

            switch(action) {
                case 'hire':
                    if (gameState.cash < 500000) {
                        logMessage('‚ùå Insufficient funds. Hiring requires $500K.', 'error');
                        break;
                    }
                    gameState.cash -= 500000;
                    gameState.employees += 5;
                    gameState.burnRate += 50000;
                    gameState.morale = Math.min(100, gameState.morale + 8);
                    logMessage('‚úÖ Hired 5 engineers. Team capacity increased!', 'success');
                    break;

                case 'raise_funding':
                case 'raise':
                    var funding, dilution, newRound;
                    if (gameState.fundingRound === 'Seed') {
                        funding = 10000000;
                        dilution = 15;
                        newRound = 'Series A';
                    } else if (gameState.fundingRound === 'Series A') {
                        funding = 25000000;
                        dilution = 12;
                        newRound = 'Series B';
                    } else {
                        funding = 50000000;
                        dilution = 10;
                        newRound = 'Series C';
                    }
                    
                    gameState.cash += funding;
                    gameState.valuation = Math.floor(gameState.valuation * 1.8);
                    gameState.fundingRound = newRound;
                    addNews('Vanguard Defense closes $' + (funding/1000000) + 'M ' + gameState.fundingRound + ' round');
                    logMessage('‚úÖ Raised $' + (funding/1000000) + 'M ' + gameState.fundingRound + '! Valuation now $' + (gameState.valuation/1000000).toFixed(1) + 'M (' + dilution + '% dilution).', 'success');
                    break;

                case 'develop':
                    if (target.includes('ai') || target.includes('surveillance')) {
                        if (gameState.products.aiSurveillance.progress >= 100) {
                            logMessage('‚ÑπÔ∏è AI Surveillance already complete.', 'system');
                            break;
                        }
                        gameState.products.aiSurveillance.progress = Math.min(100, gameState.products.aiSurveillance.progress + 20);
                        gameState.techLevel = Math.min(100, gameState.techLevel + 10);
                        logMessage('üî¨ AI Surveillance development progressed to ' + gameState.products.aiSurveillance.progress + '%', 'success');
                    } else if (target.includes('drone')) {
                        if (gameState.cash < 800000) {
                            logMessage('‚ùå Insufficient funds. Drone program requires $800K.', 'error');
                            break;
                        }
                        gameState.cash -= 800000;
                        gameState.products.autonomousDrone.progress = Math.max(gameState.products.autonomousDrone.progress, 25);
                        gameState.techLevel = Math.min(100, gameState.techLevel + 15);
                        logMessage('üî¨ Autonomous Drone program initiated! High-risk, high-reward.', 'success');
                    } else if (target.includes('cyber')) {
                        if (gameState.cash < 600000) {
                            logMessage('‚ùå Insufficient funds. Cyber Defense requires $600K.', 'error');
                            break;
                        }
                        gameState.cash -= 600000;
                        gameState.products.cyberDefense.progress = Math.max(gameState.products.cyberDefense.progress, 20);
                        gameState.techLevel = Math.min(100, gameState.techLevel + 12);
                        logMessage('üî¨ Cyber Defense program started!', 'success');
                    } else {
                        logMessage('‚ùå Unknown product. Try: ai, drone, or cyber.', 'error');
                    }
                    break;

                case 'partner':
                case 'partnership':
                    var selectedPrime;
                    
                    if (target) {
                        selectedPrime = gameState.primes.find(function(p) { return p.name.toLowerCase().includes(target); });
                    } else {
                        const availablePrimes = gameState.primes.filter(function(p) {
                            return !gameState.partnerships.find(function(partner) { return partner.name === p.name; });
                        });
                        if (availablePrimes.length > 0) {
                            selectedPrime = availablePrimes[Math.floor(Math.random() * availablePrimes.length)];
                        }
                    }
                    
                    if (!selectedPrime) {
                        logMessage('‚ùå No prime contractor available. Try: lockheed, raytheon, northrop, or boeing.', 'error');
                        break;
                    }
                    
                    if (gameState.partnerships.find(function(p) { return p.name === selectedPrime.name; })) {
                        logMessage('‚ÑπÔ∏è Already partnered with ' + selectedPrime.name + '.', 'system');
                        break;
                    }
                    
                    if (gameState.cash < 300000) {
                        logMessage('‚ùå Insufficient funds. Partnership development requires $300K.', 'error');
                        break;
                    }
                    
                    const partnershipChance = 40 + (gameState.reputation * 0.4) + (gameState.techLevel * 0.3);
                    
                    gameState.cash -= 300000;
                    
                    if (Math.random() * 100 < partnershipChance) {
                        gameState.partnerships.push(selectedPrime);
                        selectedPrime.relation = 60;
                        gameState.revenue += selectedPrime.benefits.revenue;
                        gameState.reputation = Math.min(100, gameState.reputation + selectedPrime.benefits.reputation);
                        gameState.dodRelations = Math.min(100, gameState.dodRelations + selectedPrime.benefits.dodRelations);
                        gameState.valuation = Math.floor(gameState.valuation * 1.25);
                        addNews('Vanguard Defense announces partnership with ' + selectedPrime.name);
                        logMessage('ü§ù Partnership with ' + selectedPrime.name + ' established! Major benefits unlocked.', 'success');
                    } else {
                        selectedPrime.relation += 15;
                        logMessage('‚ö†Ô∏è Partnership with ' + selectedPrime.name + ' not secured yet. Relationship improved. (Success chance was ' + partnershipChance.toFixed(0) + '%)', 'warning');
                    }
                    break;

                case 'bid_contract':
                case 'bid':
                    if (gameState.dodRelations < 50) {
                        logMessage('‚ùå DoD relations too low (need 50%). Build credibility first.', 'error');
                        break;
                    }
                    const contractValue = Math.floor(Math.random() * 2000000) + 1500000;
                    gameState.contracts.push({ name: 'DoD Contract', value: contractValue });
                    gameState.revenue += Math.floor(contractValue / 4);
                    gameState.reputation = Math.min(100, gameState.reputation + 15);
                    gameState.dodRelations = Math.min(100, gameState.dodRelations + 10);
                    gameState.valuation = Math.floor(gameState.valuation * 1.12);
                    addNews('Vanguard Defense wins $' + (contractValue/1000000).toFixed(1) + 'M DoD contract');
                    logMessage('‚úÖ Won DoD contract worth $' + (contractValue/1000000).toFixed(1) + 'M! Revenue +$' + (contractValue/4000).toFixed(0) + 'K/quarter.', 'success');
                    break;

                case 'marketing':
                case 'market':
                    if (gameState.cash < 200000) {
                        logMessage('‚ùå Insufficient funds. Marketing requires $200K.', 'error');
                        break;
                    }
                    gameState.cash -= 200000;
                    gameState.reputation = Math.min(100, gameState.reputation + 12);
                    gameState.dodRelations = Math.min(100, gameState.dodRelations + 6);
                    logMessage('‚úÖ Marketing campaign launched. Brand visibility increased!', 'success');
                    break;

                case 'demo_day':
                case 'demo':
                    if (gameState.cash < 150000) {
                        logMessage('‚ùå Insufficient funds. Demo day requires $150K.', 'error');
                        break;
                    }
                    gameState.cash -= 150000;
                    
                    const demoSuccess = 30 + (gameState.techLevel * 0.5) + (gameState.reputation * 0.3);
                    
                    if (Math.random() * 100 < demoSuccess) {
                        gameState.reputation = Math.min(100, gameState.reputation + 18);
                        gameState.dodRelations = Math.min(100, gameState.dodRelations + 15);
                        gameState.valuation = Math.floor(gameState.valuation * 1.15);
                        addNews('Vanguard Defense wows crowd at industry demo day');
                        logMessage('‚úÖ Demo day was a huge success! Reputation and DoD relations significantly boosted!', 'success');
                    } else {
                        gameState.reputation = Math.max(0, gameState.reputation - 5);
                        logMessage('‚ö†Ô∏è Demo day had mixed results. (Success chance was ' + demoSuccess.toFixed(0) + '%)', 'warning');
                    }
                    break;

                case 'optimize':
                case 'cut':
                    gameState.burnRate = Math.max(300000, Math.floor(gameState.burnRate * 0.85));
                    gameState.morale = Math.max(0, gameState.morale - 10);
                    logMessage('‚úÖ Operations optimized. Burn rate reduced 15%, but morale dropped.', 'warning');
                    break;

                case 'team_building':
                case 'morale':
                    if (gameState.cash < 100000) {
                        logMessage('‚ùå Insufficient funds. Team building requires $100K.', 'error');
                        break;
                    }
                    gameState.cash -= 100000;
                    gameState.morale = Math.min(100, gameState.morale + 18);
                    logMessage('‚úÖ Team building event completed. Morale significantly boosted!', 'success');
                    break;

                case 'report':
                case 'status':
                    logMessage('‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ COMPANY REPORT ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ', 'system');
                    logMessage('üìÖ Quarter: Q' + gameState.quarter + ' ' + gameState.year + ' | Funding Stage: ' + gameState.fundingRound, 'system');
                    logMessage('üí∞ Cash: $' + (gameState.cash/1000000).toFixed(2) + 'M | Burn: $' + (gameState.burnRate/1000).toFixed(0) + 'K/mo | Revenue: $' + (gameState.revenue/1000).toFixed(0) + 'K/mo', 'system');
                    logMessage('üìà Valuation: $' + (gameState.valuation/1000000).toFixed(1) + 'M (Goal: $1,000M)', 'system');
                    logMessage('üë• Team: ' + gameState.employees + ' | Morale: ' + Math.round(gameState.morale) + '%', 'system');
                    logMessage('‚≠ê Reputation: ' + Math.round(gameState.reputation) + '% | DoD Relations: ' + Math.round(gameState.dodRelations) + '%', 'system');
                    logMessage('üî¨ Tech Level: ' + Math.round(gameState.techLevel) + '%', 'system');
                    logMessage('üìã Products:', 'system');
                    Object.keys(gameState.products).forEach(function(key) {
                        const p = gameState.products[key];
                        logMessage('   ' + p.name + ': ' + p.progress + '% ' + (p.deployed ? '(DEPLOYED ‚úÖ)' : ''), 'system');
                    });
                    logMessage('üìë Active Contracts: ' + gameState.contracts.length, 'system');
                    logMessage('ü§ù Prime Partnerships: ' + (gameState.partnerships.map(function(p) { return p.name; }).join(', ') || 'None'), 'system');
                    logMessage('‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ', 'system');
                    break;

                case 'help':
                    logMessage('‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ COMMANDS ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ', 'system');
                    logMessage('hire - Hire 5 engineers ($500K)', 'system');
                    logMessage('raise_funding - Raise next funding round', 'system');
                    logMessage('develop [ai|drone|cyber] - Develop products', 'system');
                    logMessage('partner [lockheed|raytheon|northrop|boeing] - Seek prime partnership ($300K)', 'system');
                    logMessage('bid_contract - Bid on DoD contracts (needs 50% DoD relations)', 'system');
                    logMessage('marketing - Run marketing campaign ($200K)', 'system');
                    logMessage('demo_day - Host product demo for DoD/industry ($150K)', 'system');
                    logMessage('optimize - Cut costs (reduces morale)', 'system');
                    logMessage('team_building - Boost morale ($100K)', 'system');
                    logMessage('report - View detailed company status', 'system');
                    logMessage('next_quarter - Advance to next quarter', 'system');
                    logMessage('reset - Start new game', 'system');
                    logMessage('‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ', 'system');
                    break;

                case 'next_quarter':
                case 'next':
                case 'advance':
                    advanceQuarter();
                    break;

                case 'reset':
                    gameState.quarter = 1;
                    gameState.year = 2025;
                    gameState.cash = 5000000;
                    gameState.valuation = 20000000;
                    gameState.employees = 15;
                    gameState.morale = 75;
                    gameState.reputation = 50;
                    gameState.dodRelations = 40;
                    gameState.techLevel = 35;
                    gameState.burnRate = 450000;
                    gameState.revenue = 100000;
                    gameState.fundingRound = 'Seed';
                    gameState.products = {
                        aiSurveillance: { name: 'AI Surveillance', progress: 20, deployed: false, revenue: 50000 },
                        autonomousDrone: { name: 'Autonomous Drones', progress: 0, deployed: false, revenue: 75000 },
                        cyberDefense: { name: 'Cyber Defense Suite', progress: 0, deployed: false, revenue: 60000 }
                    };
                    gameState.contracts = [];
                    gameState.partnerships = [];
                    gameState.primes = [
                        { name: 'Lockheed Martin', relation: 0, benefits: { revenue: 100000, reputation: 15, dodRelations: 20 } },
                        { name: 'Raytheon', relation: 0, benefits: { revenue: 90000, reputation: 12, dodRelations: 18 } },
                        { name: 'Northrop Grumman', relation: 0, benefits: { revenue: 95000, reputation: 13, dodRelations: 19 } },
                        { name: 'Boeing Defense', relation: 0, benefits: { revenue: 85000, reputation: 11, dodRelations: 16 } }
                    ];
                    gameState.news = [];
                    gameState.gameOver = false;
                    logPanel.innerHTML = '';
                    newsContainer.innerHTML = '';
                    logMessage('üöÄ Welcome to Vanguard Defense Technologies!', 'system');
                    logMessage('üéØ OBJECTIVE: Build a $1B+ defense tech unicorn by growing valuation through contracts, product development, and strategic partnerships with prime contractors.', 'system');
                    logMessage('üí° Start with $5M seed funding, 15 employees, and one product in development.', 'system');
                    logMessage('ü§ù NEW: Partner with defense primes like Lockheed Martin, Raytheon, Northrop Grumman, or Boeing Defense for major revenue and credibility boosts.', 'system');
                    logMessage('‚ö° Type "help" for commands or use the buttons below. Good luck, Founder!', 'system');
                    addNews('Defense tech sector sees surge in startup activity');
                    break;

                default:
                    if (command) {
                        logMessage('‚ùå Unknown command. Type "help" for available commands.', 'error');
                    }
                    break;
            }

            updateDisplay();
        }

        commandInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                processCommand(commandInput.value);
                commandInput.value = '';
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            processCommand('reset');
        });
    </script>
</body>
</html>
